<Window x:Class="EasyDeploy.Views.MainWindow" x:Name="easyDeploy"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:control="clr-namespace:EasyDeploy.Controls"
        xmlns:prism="http://prismlibrary.com/"
        prism:ViewModelLocator.AutoWireViewModel="True"
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
        xmlns:c="clr-namespace:CalcBinding;assembly=CalcBinding"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        xmlns:local="clr-namespace:EasyDeploy.Views"
        mc:Ignorable="d"
        AllowsTransparency="True" Background="Transparent"
        WindowStartupLocation="CenterScreen" WindowStyle="None" ResizeMode="CanResize"
        MinHeight="540" MinWidth="960" Height="844" Width="1500"
        MaxHeight="{StaticResource {x:Static SystemParameters.MaximizedPrimaryScreenHeightKey}}"
        Title="{DynamicResource Title}" Icon="pack://application:,,,/Images/terminal.ico">

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="35" ResizeBorderThickness="15" />
    </WindowChrome.WindowChrome>

    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction Command="{Binding LoadedCommand}" CommandParameter="{Binding ElementName=easyDeploy}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>

    <Window.Resources>
        <Style x:Key="WindowMainMaximizedStyle" TargetType="{x:Type Border}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}, Path=WindowState}" Value="Maximized">
                    <Setter Property="Margin" Value="7" />
                    <Setter Property="Effect" Value="{x:Null}" />
                </DataTrigger>
                <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}, Path=WindowState}" Value="Normal">
                    <Setter Property="Margin" Value="10" />
                    <Setter Property="Effect">
                        <Setter.Value>
                            <DropShadowEffect Color="Black" BlurRadius="16" ShadowDepth="0" Opacity="0.5" />
                        </Setter.Value>
                    </Setter>
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <!--右上角更多菜单下拉样式-->
        <SolidColorBrush x:Key="TreeViewItem.MouseOver.Background" Color="#666666" />
        <SolidColorBrush x:Key="TreeViewItem.MouseOver.Foreground" Color="White" />
        <ControlTemplate x:Key="Button_Message_Template" TargetType="{x:Type Button}">
            <Border Background="{TemplateBinding Background}" Cursor="Hand">
                <Border x:Name="Bd">
                    <Grid x:Name="Gd">
                        <Viewbox Width="16" Height="16" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="20,0,0,0">
                            <Path x:Name="Part_Path" Fill="White"/>
                        </Viewbox>
                        <TextBlock x:Name="Tb" Text="{TemplateBinding Content}" Foreground="White" FontSize="{TemplateBinding FontSize}" FontFamily="{TemplateBinding FontFamily}" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="20,0,0,0" />
                    </Grid>
                </Border>
            </Border>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="Bd" Property="Background" Value="{DynamicResource TreeViewItem.MouseOver.Background}" />
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter TargetName="Bd" Property="Background" Value="{DynamicResource TreeViewItem.MouseOver.Background}" />
                    <Setter TargetName="Gd" Property="Background" Value="{DynamicResource TreeViewItem.MouseOver.Background}" />
                    <Setter TargetName="Tb" Property="Foreground" Value="{DynamicResource TreeViewItem.MouseOver.Foreground}" />
                </Trigger>
                <Trigger Property="Name" Value="Setting">
                    <Setter TargetName="Part_Path" Property="Data" Value="M960 414.72l-81.92-18.432c-6.144-20.48-14.848-39.936-24.576-58.88l44.544-74.24c16.384-26.624 25.088-65.536 0-90.624l-45.056-45.056c-12.288-11.776-28.16-17.92-45.056-17.408-16.896 0-34.304 5.632-47.616 14.336l-72.192 46.08c-18.944-9.728-38.4-17.92-58.368-24.576l-18.432-82.944C605.696 32.768 579.072 0 543.744 0H479.744c-35.328 0-56.832 33.28-64 64l-20.48 81.92c-21.504 6.656-42.496 15.872-62.464 26.112l-73.728-47.104c-13.824-9.216-30.72-14.336-47.616-14.336-16.896-0.512-32.768 5.632-45.056 17.408l-45.056 45.056c-25.088 25.088-16.384 64 0 90.624l46.592 77.824c-8.704 17.92-16.384 35.84-22.528 54.784l-81.92 18.432C32.768 420.352 0 446.976 0 482.304v64c0 35.328 33.28 56.832 64 64l82.944 20.48c5.632 17.408 12.8 34.304 20.992 51.2l-46.592 77.824c-16.384 26.624-25.088 65.536 0 90.624l45.056 45.056c12.288 12.288 28.672 17.408 45.056 17.408 16.896 0 34.304-5.632 47.616-14.336l73.728-47.104c19.968 10.752 40.96 19.456 62.464 26.112l20.48 81.92c7.168 30.72 28.672 64 64 64h64c35.328 0 61.952-32.768 67.584-63.488l18.432-83.456c19.968-6.656 39.424-14.848 57.856-24.064l72.192 46.08c12.8 8.704 30.208 14.336 47.616 14.336 16.896 0.512 33.28-5.632 45.056-17.408l45.056-45.056c25.088-25.088 16.384-64 0-90.624l-44.544-74.24c8.704-17.408 16.896-35.84 23.04-54.784l82.944-20.48c30.72-7.168 64-28.672 64-64V482.304c0.512-35.328-32.768-61.952-62.976-67.584z m-447.488 251.904c-85.504 0-154.624-69.12-154.624-154.112 0-85.504 69.12-154.624 154.624-154.624s154.624 69.12 154.624 154.624c0 84.992-69.12 154.112-154.624 154.112z" />
                </Trigger>
                <Trigger Property="Name" Value="About">
                    <Setter TargetName="Part_Path" Property="Data" Value="M512 992C246.912 992 32 777.088 32 512 32 246.912 246.912 32 512 32c265.088 0 480 214.912 480 480 0 265.088-214.912 480-480 480z m-59.072-512v236.32a54.144 54.144 0 1 0 108.288 0V480a54.144 54.144 0 1 0-108.288 0z m53.76-226.464c-14.72 0-27.232 4.544-37.568 15.136-11.04 9.856-16.192 22.72-16.192 38.656 0 15.136 5.152 28 16.192 38.624 10.336 10.592 22.848 15.904 37.6 15.904a57.6 57.6 0 0 0 39.04-15.168c10.304-10.592 15.456-23.456 15.456-39.36s-5.12-28.8-15.456-38.656c-10.304-10.56-23.584-15.136-39.04-15.136z" />
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <Style x:Key="Button_Message" TargetType="{x:Type Button}">
            <Setter Property="Background" Value="#02FFFFFF" />
            <Setter Property="BorderBrush" Value="Transparent" />
            <Setter Property="Foreground" Value="Black" />
            <Setter Property="FontSize" Value="12" />
            <Setter Property="Width" Value="125" />
            <Setter Property="Height" Value="35" />
            <Setter Property="Template" Value="{StaticResource Button_Message_Template}" />
        </Style>
    </Window.Resources>

    <Border x:Name="BaseBorder" Style="{StaticResource WindowMainMaximizedStyle}" SnapsToDevicePixels="True">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="35"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <!--标题栏-->
            <Border x:Name="TitleBar" Grid.Row="0" Background="#4C4A48" SnapsToDevicePixels="True" CornerRadius="5,5,0,0">
                <Grid>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center">
                        <Image Source="{Binding ElementName=easyDeploy,Path=Icon}" Width="20" Margin="10,0,5,0"/>
                        <Label Content="{Binding ElementName=easyDeploy,Path=Title}" Foreground="#FEFEFE" FontSize="12" VerticalAlignment="Center" HorizontalAlignment="Left"/>
                    </StackPanel>
                    <Border Height="25" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="150,0" Background="#2E2E2E" CornerRadius="10">
                        <StackPanel Orientation="Horizontal" Margin="5,0">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <Label Content="{DynamicResource CPU}" Foreground="White" FontSize="12" />
                                <Label Content="{Binding CpuCounter}" Width="40" Foreground="White" FontSize="12" />
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <Label Content="{DynamicResource RAM}" Foreground="White" FontSize="12" />
                                <Label Content="{Binding RamCounter}" Width="40" Foreground="White" FontSize="12" />
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <Label Content="{DynamicResource GPU}" Foreground="White" FontSize="12" />
                                <Label Content="{Binding GpuCounter}" Width="40" Foreground="White" FontSize="12" />
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <Label Content="{DynamicResource VRAM}" Foreground="White" FontSize="12" />
                                <Label Content="{Binding VRamCounter}" Width="40" Foreground="White" FontSize="12" />
                            </StackPanel>
                        </StackPanel>
                    </Border>
                    <StackPanel WindowChrome.IsHitTestVisibleInChrome="True" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="2,1">
                        <control:IceSvgButton x:Name="MoreMenus" Width="30" Height="25" ImageMargin="5"
                                           ButtonImage="m1002.98416,498.77581l-472.13262,475.50902c-11.25466,11.25464 -29.82483,11.25464 -41.07949,0l-472.13262,-475.50902c-18.00744,-18.00745 -5.06459,-48.95774 20.25837,-48.95774l944.82798,0c25.88571,0 38.82855,30.95029 20.25837,48.95774zm-31.51302,-165.44337l-918.94229,0c-23.63478,0 -43.3304,-19.69564 -43.3304,-43.33042c0,-23.63476 19.69563,-43.3304 43.3304,-43.3304l918.94229,0c23.63476,0 43.3304,19.69564 43.3304,43.3304c0,24.19751 -19.69564,43.33042 -43.3304,43.33042zm0,-205.39739l-918.94229,0c-23.63478,0 -43.3304,-19.69564 -43.3304,-43.33042c0,-23.63476 19.69563,-43.3304 43.3304,-43.3304l918.94229,0c23.63476,0 43.3304,19.69564 43.3304,43.3304c0,24.19751 -19.69564,43.33042 -43.3304,43.33042z"
                                           NormalFill="White" IsMouseOverFill="White" IsMouseOverBackground="#575553"
                                           Click="MoreMenus_Click" PreviewMouseDown="MoreMenus_PreviewMouseDown"/>
                        <control:IceSvgButton x:Name="mainMinimize" Width="30" Height="25" ImageMargin="7"
                                           ButtonImage="M96 417.984h832v188.032h-832z"
                                           NormalFill="White" IsMouseOverFill="White" IsMouseOverBackground="#575553"
                                           Click="Minimize_Click"/>
                        <control:IceSvgButton x:Name="mainMaximization" Width="30" Height="25" ImageMargin="5"
                                           NormalFill="White" IsMouseOverFill="White" IsMouseOverBackground="#575553"
                                           Click="Maximization_Click">
                            <control:IceSvgButton.Style>
                                <Style TargetType="{x:Type control:IceSvgButton}" BasedOn="{StaticResource {x:Type control:IceSvgButton}}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}, Path=WindowState}" Value="Maximized">
                                            <Setter Property="ButtonImage" Value="M146.285714 804.571429h731.428572V365.714286H146.285714v438.857143zM1024 164.571429v694.857142c0 50.285714-41.142857 91.428571-91.428571 91.428572h-841.142858A91.684571 91.684571 0 0 1 0 859.428571v-694.857142C0 114.285714 41.142857 73.142857 91.428571 73.142857h841.142858C982.857143 73.142857 1024 114.285714 1024 164.571429z" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}, Path=WindowState}" Value="Normal">
                                            <Setter Property="ButtonImage" Value="M735.786833 62.98859 288.310382 62.98859c-123.567293 0-223.738737 100.164281-223.738737 223.738737l0 447.476451c0 123.555014 100.17042 223.751017 223.738737 223.751017l447.476451 0c123.561154 0 223.738737-100.196003 223.738737-223.751017L959.52557 286.727327C959.52557 163.15287 859.347986 62.98859 735.786833 62.98859zM831.694159 702.260252c0 70.612221-57.238632 127.850853-127.850853 127.850853L320.292793 830.111105c-70.612221 0-127.850853-57.238632-127.850853-127.850853L192.44194 318.708715c0-70.612221 57.238632-127.850853 127.850853-127.850853l383.551536 0c70.612221 0 127.850853 57.238632 127.850853 127.850853L831.695183 702.260252z" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </control:IceSvgButton.Style>
                        </control:IceSvgButton>
                        <control:IceSvgButton x:Name="mainClose" Width="30" Height="25" ImageMargin="5"
                                           ButtonImage="M954.304 190.336a15.552 15.552 0 0 1 0 21.952l-300.032 300.032 298.56 298.56a15.616 15.616 0 0 1 0 22.016l-120.96 120.896a15.552 15.552 0 0 1-21.952 0L511.36 655.232 214.272 952.32a15.552 15.552 0 0 1-21.952 0l-120.896-120.896a15.488 15.488 0 0 1 0-21.952l297.152-297.152L69.888 213.76a15.552 15.552 0 0 1 0-21.952l120.896-120.896a15.552 15.552 0 0 1 21.952 0L511.36 369.472l300.096-300.032a15.36 15.36 0 0 1 21.952 0l120.896 120.896z"
                                           NormalFill="White" IsMouseOverFill="White" IsMouseOverBackground="#D8605A"
                                           Click="mainClose_Click"/>
                    </StackPanel>
                    <Popup x:Name="popup_Menu" AllowsTransparency="True" PopupAnimation="Slide" VerticalOffset="10" HorizontalOffset="-50" StaysOpen="False"
                           IsOpen="False" PlacementTarget="{Binding ElementName=MoreMenus}" Placement="Bottom">
                        <Popup.Child>
                            <Grid>
                                <Border BorderBrush="#92CAF4" BorderThickness="1" Opacity="0.5"></Border>
                                <Border Background="#35363A" Margin="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
                                <StackPanel Margin="1">
                                    <Button x:Name="Setting" Content="{DynamicResource Setting}" Style="{StaticResource Button_Message}" Command="{Binding Settings}"/>
                                    <Button x:Name="About" Content="{DynamicResource About}" Style="{StaticResource Button_Message}" Command="{Binding About}"/>
                                </StackPanel>
                            </Grid>
                        </Popup.Child>
                    </Popup>
                </Grid>
            </Border>
            <!--工作区-->
            <Grid x:Name="WorkArea" Grid.Row="1" Background="#35363A">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="600" MinWidth="200" MaxWidth="{c:Binding ElementName=easyDeploy,Path=ActualWidth - 200}"/>
                    <ColumnDefinition Width="auto"/>
                    <ColumnDefinition Width="*" MinWidth="200"/>
                </Grid.ColumnDefinitions>
                <!--配置列表-->
                <Grid Grid.Column="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="40"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid Grid.Row="0" Margin="10 0 10 0">
                        <DockPanel>
                            <Label Content="{DynamicResource DeployService}" Foreground="White" FontSize="12" VerticalAlignment="Center"/>
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0">
                                <Label Content="{DynamicResource All}" Foreground="White" FontSize="12" />
                                <Label Content="{c:Binding Services.Count}" Foreground="White" FontSize="12"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0">
                                <Label Content="{DynamicResource StartState}" Foreground="White" FontSize="12" />
                                <Label Content="{c:Binding ServicesResources.Count}" Foreground="White" FontSize="12" />
                            </StackPanel>
                        </DockPanel>
                        <control:IceSvgButton x:Name="AddService" Width="24" Height="24" NormalFill="White" IsMouseOverBackground="Transparent" IsMouseOverFill="Gainsboro" ImageMargin="2"
                                                   ButtonImage="m512,0c-282.624,0 -512,229.376 -512,512s229.376,512 512,512s512,-229.376 512,-512s-229.376,-512 -512,-512zm194.56,563.2l-143.36,0l0,143.36c0,28.16 -23.04,51.2 -51.2,51.2s-51.2,-23.04 -51.2,-51.2l0,-143.36l-143.36,0c-28.16,0 -51.2,-23.04 -51.2,-51.2s23.04,-51.2 51.2,-51.2l143.36,0l0,-143.36c0,-28.16 23.04,-51.2 51.2,-51.2s51.2,23.04 51.2,51.2l0,143.36l143.36,0c28.16,0 51.2,23.04 51.2,51.2s-23.04,51.2 -51.2,51.2z"
                                                   HorizontalAlignment="Right" VerticalAlignment="Center" Command="{Binding AddService}"/>
                    </Grid>
                    <control:IceDataGrid HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.Row="1" x:Name="grid" BorderThickness="0" GridLinesVisibility="None" AutoGenerateColumns="False" CanUserAddRows="False" SelectionMode="Single" AlternationCount="2" ItemsSource="{Binding Services}">
                        <DataGrid.Columns>
                            <DataGridTemplateColumn IsReadOnly="True" Width="60">
                                <DataGridTemplateColumn.Header>
                                    <TextBlock Text="{DynamicResource State}" />
                                </DataGridTemplateColumn.Header>
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Ellipse x:Name="ServiceType" Width="14" Height="14">
                                            <Ellipse.Style>
                                                <Style TargetType="Ellipse">
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding ServiceState}" Value="0">
                                                            <Setter Property="Fill" Value="Gray"/>
                                                        </DataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding ServiceState}" Value="1"/>
                                                                <Condition Binding="{c:Binding '(Pid == null)'}" Value="False"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="Fill" Value="Lime"/>
                                                        </MultiDataTrigger>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding ServiceState}" Value="1"/>
                                                                <Condition Binding="{c:Binding '(Pid == null)'}" Value="True"/>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="Fill" Value="Orange"/>
                                                        </MultiDataTrigger>
                                                        <DataTrigger Binding="{Binding ServiceState}" Value="2">
                                                            <Setter Property="Fill" Value="Red"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding ServiceState}" Value="3">
                                                            <Setter Property="Fill" Value="Orange"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Ellipse.Style>
                                        </Ellipse>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn IsReadOnly="True" Width="*">
                                <DataGridTemplateColumn.Header>
                                    <TextBlock Text="{DynamicResource Service}" />
                                </DataGridTemplateColumn.Header>
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Label Foreground="White" Content="{Binding ServiceName}" ToolTip="{Binding ServiceName}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn IsReadOnly="True" Width="*">
                                <DataGridTemplateColumn.Header>
                                    <TextBlock Text="{DynamicResource Pid}" />
                                </DataGridTemplateColumn.Header>
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Label Foreground="White" Content="{Binding Pid}" ToolTip="{Binding Pid}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn IsReadOnly="True" Width="*">
                                <DataGridTemplateColumn.Header>
                                    <TextBlock Text="{DynamicResource Port}" />
                                </DataGridTemplateColumn.Header>
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Label Foreground="White" Content="{Binding Port}" ToolTip="{Binding Port}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Width="164">
                                <DataGridTemplateColumn.Header>
                                    <TextBlock Text="{DynamicResource Actions}" />
                                </DataGridTemplateColumn.Header>
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Right">
                                            <control:IceSvgButton x:Name="Start" Width="24" Height="24" NormalFill="LimeGreen" IsMouseOverBackground="Transparent" IsMouseOverFill="#32E132" ImageMargin="4"
                                                               ButtonImage="m52.39999,0c-31.3,0 -52.4,19.9 -52.4,49.5l0,659.6c0,30.9 25.9,53.4 61.5,53.4c17,0 32.8,-5.3 43.9,-14.7l444.6,-309.3l1.2,-1.1c13.3,-12.2 20.6,-28.4 20.6,-45.7s-7.3,-33.5 -20.6,-45.7l-2.1,-1.7l-443.3,-324.9c-13.6,-11.8 -34.3,-19.4 -53.4,-19.4z"
                                                               CommandParameter="{Binding}" Command="{Binding Path=DataContext.StartService,RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type control:IceDataGrid}}}">
                                                <control:IceSvgButton.Style>
                                                    <Style TargetType="{x:Type control:IceSvgButton}" BasedOn="{StaticResource {x:Type control:IceSvgButton}}">
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding ServiceState}" Value="0">
                                                                <Setter Property="IsEnabled" Value="True"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding ServiceState}" Value="1">
                                                                <Setter Property="IsEnabled" Value="False"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding ServiceState}" Value="2">
                                                                <Setter Property="IsEnabled" Value="False"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding ServiceState}" Value="3">
                                                                <Setter Property="IsEnabled" Value="False"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </control:IceSvgButton.Style>
                                            </control:IceSvgButton>
                                            <control:IceSvgButton x:Name="Stop" Width="24" Height="24" NormalFill="Tomato" IsMouseOverBackground="Transparent" IsMouseOverFill="Salmon" ImageMargin="5"
                                                               ButtonImage="m84.375,0l506.25,0c46.58203,0 84.375,37.79297 84.375,84.375l0,506.25c0,46.58203 -37.79297,84.375 -84.375,84.375l-506.25,0c-46.58203,0 -84.375,-37.79297 -84.375,-84.375l0,-506.25c0,-46.58203 37.79297,-84.375 84.375,-84.375z"
                                                               CommandParameter="{Binding}" Command="{Binding Path=DataContext.StopService,RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type control:IceDataGrid}}}">
                                                <control:IceSvgButton.Style>
                                                    <Style TargetType="{x:Type control:IceSvgButton}" BasedOn="{StaticResource {x:Type control:IceSvgButton}}">
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding ServiceState}" Value="0">
                                                                <Setter Property="IsEnabled" Value="False"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding ServiceState}" Value="1">
                                                                <Setter Property="IsEnabled" Value="True"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding ServiceState}" Value="2">
                                                                <Setter Property="IsEnabled" Value="True"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding ServiceState}" Value="3">
                                                                <Setter Property="IsEnabled" Value="False"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </control:IceSvgButton.Style>
                                            </control:IceSvgButton>
                                            <control:IceSvgButton x:Name="Shell" Width="24" Height="24" NormalFill="White" IsMouseOverBackground="Transparent" IsMouseOverFill="Gainsboro" ImageMargin="4"
                                                               ButtonImage="m42.66667,0l768,0a42.66667,42.66667 0 0 1 42.66667,42.66667l0,682.66666a42.66667,42.66667 0 0 1 -42.66667,42.66667l-768,0a42.66667,42.66667 0 0 1 -42.66667,-42.66667l0,-682.66666a42.66667,42.66667 0 0 1 42.66667,-42.66667zm42.66667,85.33333l0,597.33334l682.66666,0l0,-597.33334l-682.66666,0zm341.33333,426.66667l256,0l0,85.33333l-256,0l0,-85.33333zm-142.208,-128l-120.704,-120.66133l60.37333,-60.37334l180.992,181.03467l-180.992,181.03467l-60.37333,-60.37334l120.704,-120.66133z"
                                                               CommandParameter="{Binding}" Command="{Binding Path=DataContext.ShellService,RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type control:IceDataGrid}}}">
                                                <control:IceSvgButton.Style>
                                                    <Style TargetType="{x:Type control:IceSvgButton}" BasedOn="{StaticResource {x:Type control:IceSvgButton}}">
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{c:Binding '(Pid == null)'}" Value="True">
                                                                <Setter Property="IsEnabled" Value="False"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </control:IceSvgButton.Style>
                                            </control:IceSvgButton>
                                            <control:IceSvgButton x:Name="Browse" Width="24" Height="24" NormalFill="#FFE589" IsMouseOverBackground="Transparent" IsMouseOverFill="#fbe69d" ImageMargin="4"
                                                               ButtonImage="m289.984,0a64,64 0 0 1 62.48533,50.13333l3.09333,13.86667l263.104,0a64,64 0 0 1 64,64l0,448a64,64 0 0 1 -64,64l-554.66666,0a64,64 0 0 1 -64,-64l0,-512a64,64 0 0 1 64,-64l225.984,0zm286.016,448l-469.33334,0l0,64l469.33334,0l0,-64zm42.66666,-320l-248.896,0l9.49334,42.66667l239.40266,0l0,-42.66667z"
                                                               CommandParameter="{Binding}" Command="{Binding Path=DataContext.BrowseService,RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type control:IceDataGrid}}}">
                                                <control:IceSvgButton.Style>
                                                    <Style TargetType="{x:Type control:IceSvgButton}" BasedOn="{StaticResource {x:Type control:IceSvgButton}}">
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding AllowDirectoryToOpen}" Value="False">
                                                                <Setter Property="IsEnabled" Value="False"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </control:IceSvgButton.Style>
                                            </control:IceSvgButton>
                                            <control:IceSvgButton x:Name="Edit" Width="24" Height="24" NormalFill="White" IsMouseOverBackground="Transparent" IsMouseOverFill="Gainsboro" ImageMargin="4"
                                                               ButtonImage="m768,724l-736,0c-17.7,0 -32,14.3 -32,32l0,36c0,4.4 3.6,8 8,8l784,0c4.4,0 8,-3.6 8,-8l0,-36c0,-17.7 -14.3,-32 -32,-32zm-622.3,-84c2,0 4,-0.2 6,-0.5l168.2,-29.5c2,-0.4 3.9,-1.3 5.3,-2.8l423.9,-423.9c3.9,-3.9 3.9,-10.2 0,-14.1l-166.2,-166.3c-1.9,-1.9 -4.4,-2.9 -7.1,-2.9s-5.2,1 -7.1,2.9l-423.9,423.9c-1.5,1.5 -2.4,3.3 -2.8,5.3l-29.5,168.2c-1.9,11.1 1.5,21.9 9.4,29.8c6.6,6.4 14.9,9.9 23.8,9.9z"
                                                               CommandParameter="{Binding}" Command="{Binding Path=DataContext.EditService,RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type control:IceDataGrid}}}"/>
                                            <control:IceSvgButton x:Name="Delete" Width="24" Height="24" NormalFill="White" IsMouseOverBackground="Transparent" IsMouseOverFill="#D8605A" ImageMargin="4"
                                                               ButtonImage="m483.14063,356.01563l217.96875,-217.96875c14.4375,-14.4375 14.4375,-40.03125 0,-54.46875l-72.65625,-72.65625c-14.4375,-14.4375 -40.125,-14.4375 -54.46875,0l-217.96875,217.875l-217.96875,-217.96875c-14.4375,-14.4375 -40.125,-14.4375 -54.46875,0l-72.65625,72.65625c-14.4375,14.4375 -14.4375,40.125 0,54.46875l217.875,218.0625l-217.96875,217.96875c-14.4375,14.4375 -14.4375,40.125 0,54.46875l72.65625,72.65625c14.4375,14.4375 40.125,14.4375 54.46875,0l218.0625,-217.96875l217.96875,217.96875c14.4375,14.4375 40.125,14.4375 54.46875,0l72.65625,-72.65625c14.4375,-14.4375 14.4375,-40.03125 0,-54.46875l-217.96875,-217.96875z"
                                                               CommandParameter="{Binding}" Command="{Binding Path=DataContext.DeleteService,RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type control:IceDataGrid}}}"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </control:IceDataGrid>
                </Grid>

                <!--网格分隔-->
                <GridSplitter Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Width="6">
                    <GridSplitter.Style>
                        <Style TargetType="GridSplitter">
                            <Style.Triggers>
                                <Trigger Property="VerticalAlignment" Value="Stretch">
                                    <Setter Property="BorderThickness" Value="1,0,1,0"></Setter>
                                    <Setter Property="BorderBrush" Value="LightGray"></Setter>
                                    <Setter Property="HorizontalAlignment" Value="Center"></Setter>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="{x:Type GridSplitter}">
                                                <Grid Background="Transparent">
                                                    <Canvas VerticalAlignment="Center">
                                                        <StackPanel Orientation="Vertical" >
                                                            <Ellipse Width="4" Height="4" Fill="LightGray" Margin="1,2"/>
                                                            <Ellipse Width="4" Height="4" Fill="LightGray" Margin="1,2"/>
                                                            <Ellipse Width="4" Height="4" Fill="LightGray" Margin="1,2"/>
                                                        </StackPanel>
                                                    </Canvas>
                                                </Grid>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </GridSplitter.Style>
                </GridSplitter>

                <!--控制台信息-->
                <Grid Grid.Column="2">
                    <TabControl Background="Transparent" BorderThickness="0" Padding="0" ItemsSource="{Binding ServicesShell}" SelectedIndex="{Binding ServicesShellIndex}">
                        <TabControl.ItemTemplate>
                            <DataTemplate>
                                <ContentPresenter Content="{Binding Value.Header}"/>
                            </DataTemplate>
                        </TabControl.ItemTemplate>
                        <TabControl.ContentTemplate>
                            <DataTemplate>
                                <ContentControl Content="{Binding Value.Control}"/>
                            </DataTemplate>
                        </TabControl.ContentTemplate>
                    </TabControl>
                </Grid>
            </Grid>
            <!--系统托盘图标-->
            <tb:TaskbarIcon 
                IconSource="{Binding ElementName=easyDeploy,Path=Icon}" 
                ToolTipText="{Binding ElementName=easyDeploy,Path=Title}"
                LeftClickCommand="{Binding ShowWindow}"
                DoubleClickCommand="{Binding ShowWindow}">
                <tb:TaskbarIcon.ContextMenu>
                    <ContextMenu Foreground="White">
                        <MenuItem Header="{DynamicResource ShowOrHide}" Command="{Binding ShowOrHide}"/>
                        <MenuItem Header="{DynamicResource Setting}" Command="{Binding Settings}"/>
                        <MenuItem Header="{DynamicResource Exit}" Command="{Binding Close}"/>
                    </ContextMenu>
                </tb:TaskbarIcon.ContextMenu>
            </tb:TaskbarIcon>
        </Grid>
    </Border>
</Window>
